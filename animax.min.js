/**
 * Animax.js
 * Extendable Javascript Animation Handler
 *
 * Copyright 2011-2012 AvacWeb (avacweb.com)
 * Released under the MIT and GPL Licenses.
*/ 
(function(){var d={rAF:window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return setTimeout(a,1000/60)},running:!1,animations:[],defaultObj:{duration:null,onStart:function(){},onFinish:function(){},callback:function(){},finished:!1,started:!1,values:[],style:"smooth",curTweek:0,length:0,start:0,end:0,reset:function(){this.started=this.finished=!1;this.store={};this.curTweek=0},data:function(a,b){2==arguments.length&&(this.store[a]=b);return this.store[a]},store:{}},styles:{smooth:[1,2,3,4,5,6,7,8,9,10,9,8,7,6,5,4,3,2,1],accell:[1,2,3,4,5,6,7,8,9,10,10,11,12,12],zoom:[12,12,11,10,10,9,8,7,6,5,4,3,2,1],linear:[10,10,10,10,10,10,10,10,10,10],bounce:[10,10,10,10,10,10,10,10,-8,11,-6,10,-4,8,-3,6,-2,5,-1,4],shake:[6,6,-6,-6,-6,-6,6,6,8,8,-8,-8,-8,-8,8,8,6,6,-6,-6,-6,-6,6,6,5,5,-5,-5,-4,-4,4,4,3,-3]},speeds:{fast:400,normal:800,slow:2E3,slug:3E3},createValues:function(a,b,c){var d=[],e=parseInt(a),a=b-a,c=this.styles[c];if(!c)return[];for(var b=c.length,f=0;f<b;f++)e+=a*c[f]/100,d[f]=(e+"").replace(/(\.\d)\d+/,"$1");return d},add:function(){for(var a=0,b=arguments.length;a<b;a++)"object"===typeof arguments[a]&&this.animations.push(arguments[a])},create:function(a,b){"string"===typeof a&&(a=this.presets[a]);if("object"==typeof a){for(var c in this.defaultObj)c in a||(a[c]=this.defaultObj[c]);"string"===typeof a.style&&(a.values=this.createValues(a.start,a.end,a.style));a.length=a.values.length;a.element=b}return a},runAll:function(a){for(var b=!1,c=d,g=0,e,f=c.animations;e=f[g];++g)if(e.started||(e.onStart(),e.started=!0),!e.finished)b=!0,e.callback(e.values[e.curTweek++],e.element||null),e.curTweek>=e.length&&(e.onFinish(),e.finished=!0);if(!b){for(a();g;g--)f[g-1].reset();return c.running=!1}c.rAF.call(window,c.runAll);c.running=!0},run:function(a,b){b||(b=a.duration);b&&"string"===typeof b&&(b=this.speeds[b]);var b=b||this.speeds.normal,c=setInterval(function(){if(!a.started){a.onStart();a.started=true}if(!a.finished){a.callback(a.values[a.curTweek++],a.element||null);if(a.curTweek>=a.length){a.onFinish();a.finished=true;clearTimeout(c)}}},b/a.length)},clear:function(){this.animations=[]},resetAll:function(){for(var a=this.animations[0],b=0;a;a=this.animations[++b])a.reset()},setPreset:function(a,b){this.presets[a]=b},config:function(a,b){if("string"==typeof a)this.defaultObj[a]=b;else for(var c in a)this.defaultObj[c]=a[c]},presets:{}};d.presets.fadeIn={end:1,style:"smooth",onStart:function(){this.element?this.element.style.display="":this.finished=!0},callback:function(a,b){b.style.opacity=a;b.filters&&(b.filters.item("DXImageTransform.Microsoft.Alpha").opacity=100*a)}};d.presets.fadeOut={end:0,start:1,style:"smooth",onStart:function(){this.element||(this.finished=!0)},callback:function(a,b){b.style.opacity=a;b.filters&&(b.filters.item("DXImageTransform.Microsoft.Alpha").opacity=100*a)},onFinish:function(){this.element.style.display="none";this.element.style.opacity=1;this.element.filters&&(this.element.filters.item("DXImageTransform.Microsoft.Alpha").opacity=100)}};d.presets.slideDown={end:0,onStart:function(){if(!this.element)return this.finished=!0;var a=this.element;a.style.display="";this.values=d.createValues(this.start,a.offsetHeight,this.style)},callback:function(a,b){b.style.maxHeight=a+"px"},onFinish:function(){this.element.style.maxHeight="none"}};d.presets.slideUp={end:0,onStart:function(){if(!this.element)return this.finished=!0;var a=this.element;this.values=d.createValues(a.offsetHeight,this.end,this.style);a.style.overflow="hidden"},callback:function(a,b){b.style.maxHeight=a+"px"},onFinish:function(){this.element.style.display="none";this.element.style.maxHeight="none"}};d.presets.scrollUp={end:0,onStart:function(){this.values=d.createValues(window.scrollY,this.end,this.style)},callback:function(a){window.scrollTo(window.scrollX,a)}};d.presets.scrollTo={onStart:function(){this.values=d.createValues(window.scrollY,this.element||0,this.style)},callback:function(a){window.scrollTo(window.scrollX,a)}};d.presets.implode={onStart:function(){if(!this.element)return this.finished=!0;this.element.style.overflow="hidden";this.values=d.createValues(this.element.offsetWidth,0,this.style);this.data("height",d.createValues(this.element.offsetHeight,0,this.style))},callback:function(a){this.element.style.maxWidth=a+"px";this.element.style.maxHeight=this.data("height")[this.curTweek]+"px"},onFinish:function(){this.element.style.display="none"}};window.animax=d})();